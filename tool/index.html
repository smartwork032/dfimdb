<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DudeFilms All-In-One Toolkit</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        slate: { 850: '#1e293b', 900: '#0f172a', 950: '#020617' },
                        primary: { 500: '#6366f1', 600: '#4f46e5' }
                    }
                }
            }
        }
    </script>
    
    <!-- Dependencies -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #020617; color: #e2e8f0; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }

        .glass-panel {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(51, 65, 85, 0.5);
        }
        
        .nav-item.active {
            background-color: #4f46e5;
            color: white;
            box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.2), 0 2px 4px -1px rgba(79, 70, 229, 0.1);
        }

        /* Fade Animation */
        .tab-content { display: none; opacity: 0; transition: opacity 0.3s ease-in-out; }
        .tab-content.active { display: block; opacity: 1; }
    </style>
</head>
<body class="h-screen flex overflow-hidden">

    <!-- SIDEBAR -->
    <aside class="w-64 bg-slate-900 border-r border-slate-800 flex flex-col flex-shrink-0 z-20">
        <div class="h-16 flex items-center px-6 border-b border-slate-800">
            <h1 class="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-purple-400">
                DudeFilms <span class="text-xs text-slate-500 font-normal ml-1">Toolkit</span>
            </h1>
        </div>
        
        <nav class="flex-1 p-4 space-y-2 overflow-y-auto">
            <button onclick="switchTab('imdb')" id="nav-imdb" class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-800 hover:text-white transition-all group active">
                <i class="fa-solid fa-clapperboard text-lg w-6 text-center group-hover:scale-110 transition-transform"></i>
                <span class="font-medium">IMDB Generator</span>
            </button>
            
            <button onclick="switchTab('post')" id="nav-post" class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-800 hover:text-white transition-all group">
                <i class="fa-solid fa-link text-lg w-6 text-center group-hover:scale-110 transition-transform"></i>
                <span class="font-medium">Post Links</span>
            </button>
            
            <button onclick="switchTab('episode')" id="nav-episode" class="nav-item w-full flex items-center gap-3 px-4 py-3 rounded-xl text-slate-400 hover:bg-slate-800 hover:text-white transition-all group">
                <i class="fa-solid fa-layer-group text-lg w-6 text-center group-hover:scale-110 transition-transform"></i>
                <span class="font-medium">Episode Links</span>
            </button>
        </nav>

        <div class="p-4 border-t border-slate-800">
            <a href="https://dudefilms.in" target="_blank" class="flex items-center gap-3 px-4 py-3 rounded-xl text-slate-500 hover:text-indigo-400 transition-colors text-sm">
                <i class="fa-solid fa-arrow-up-right-from-square"></i>
                Open Website
            </a>
        </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="flex-1 overflow-hidden relative bg-slate-950 flex flex-col">
        
        <!-- Header Mobile (Optional/Simple) -->
        <div class="md:hidden h-16 bg-slate-900 border-b border-slate-800 flex items-center px-4">
             <span class="font-bold text-white">DudeFilms Tools</span>
        </div>

        <!-- SCROLLABLE AREA -->
        <div class="flex-1 overflow-y-auto p-4 md:p-8">
            <div class="max-w-7xl mx-auto">

                <!-- ==================== TAB 1: IMDB GENERATOR ==================== -->
                <div id="tab-imdb" class="tab-content active space-y-6">
                    <header class="mb-8">
                        <h2 class="text-2xl font-bold text-white mb-2">IMDB Post Generator</h2>
                        <p class="text-slate-400">Fetch movie details and generate HTML formatted posts.</p>
                    </header>

                    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                        <!-- Left: Inputs -->
                        <div class="lg:col-span-5 space-y-6">
                            <!-- Fetcher -->
                            <div class="glass-panel rounded-xl p-6">
                                <label class="block text-sm font-medium text-slate-400 mb-2">IMDB ID or URL</label>
                                <div class="flex gap-2">
                                    <input type="text" id="imdb_id" placeholder="tt4154796" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2.5 text-white focus:ring-2 focus:ring-indigo-500 outline-none">
                                    <button id="btn_imdb_fetch" class="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2.5 rounded-lg font-medium transition flex items-center gap-2">
                                        <i class="fa-solid fa-wand-magic-sparkles"></i> Fetch
                                    </button>
                                </div>
                            </div>

                            <!-- Config -->
                            <div class="glass-panel rounded-xl p-6 space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate-400 mb-1">Quality & Size String</label>
                                    <input type="text" id="imdb_quality" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-sm text-white focus:ring-indigo-500 outline-none" value="480p [] || 720p [] || 1080p []">
                                    <p class="text-xs text-slate-500 mt-1">Format: <code>Quality [Size] || Quality [Size]</code></p>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-slate-400 mb-1">Language</label>
                                        <input type="text" id="imdb_lang" list="lang_opts" value="Hindi" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-sm text-white focus:ring-indigo-500 outline-none">
                                        <datalist id="lang_opts"><option value="Hindi"><option value="English"><option value="Dual audio {Hindi-English}"><option value="Multi Audio"></datalist>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-slate-400 mb-1">Source</label>
                                        <input type="text" id="imdb_source" list="source_opts" value="WEB-DL" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-sm text-white focus:ring-indigo-500 outline-none">
                                        <datalist id="source_opts"><option value="WEB-DL"><option value="BluRay"><option value="HDTC"></datalist>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-slate-400 mb-1">Subtitles</label>
                                    <input type="text" id="imdb_subtitle" value="ESubs" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-sm text-white focus:ring-indigo-500 outline-none">
                                </div>
                                <div>
                                    <div class="flex justify-between mb-1">
                                        <label class="block text-sm font-medium text-slate-400">Screenshots</label>
                                        <button onclick="addImdbScreenshot()" class="text-xs text-indigo-400 hover:text-white"><i class="fa-solid fa-plus"></i> Add</button>
                                    </div>
                                    <div id="imdb_screenshots" class="space-y-2">
                                        <input type="text" class="screenshot-input w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-sm text-white placeholder-slate-600 outline-none" placeholder="Image URL...">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Right: Outputs -->
                        <div class="lg:col-span-7 h-full">
                            <div class="glass-panel rounded-xl p-6 h-full flex flex-col">
                                <div class="mb-4">
                                    <div class="flex justify-between items-center mb-1">
                                        <label class="text-xs font-bold text-slate-500 uppercase">Title</label>
                                        <button onclick="copyToClipboard('out_imdb_title')" class="text-xs text-indigo-400 hover:text-white"><i class="fa-regular fa-copy"></i> Copy</button>
                                    </div>
                                    <input type="text" id="out_imdb_title" readonly class="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-green-400 font-mono text-sm outline-none">
                                </div>
                                <div class="mb-4">
                                    <div class="flex justify-between items-center mb-1">
                                        <label class="text-xs font-bold text-slate-500 uppercase">Poster URL</label>
                                        <button onclick="copyToClipboard('out_imdb_poster')" class="text-xs text-indigo-400 hover:text-white"><i class="fa-regular fa-copy"></i> Copy</button>
                                    </div>
                                    <input type="text" id="out_imdb_poster" readonly class="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-blue-400 font-mono text-xs outline-none">
                                </div>
                                <div class="flex-grow flex flex-col">
                                    <div class="flex justify-between items-center mb-1">
                                        <label class="text-xs font-bold text-slate-500 uppercase">HTML Content</label>
                                        <button onclick="copyToClipboard('out_imdb_content')" class="text-xs text-indigo-400 hover:text-white"><i class="fa-regular fa-copy"></i> Copy HTML</button>
                                    </div>
                                    <textarea id="out_imdb_content" readonly class="w-full flex-grow min-h-[300px] bg-slate-900 border border-slate-700 rounded-lg p-4 text-slate-300 font-mono text-xs resize-none outline-none"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ==================== TAB 2: POST LINK GENERATOR ==================== -->
                <div id="tab-post" class="tab-content space-y-6">
                    <header class="flex flex-col md:flex-row md:items-end justify-between gap-4 mb-8">
                        <div>
                            <h2 class="text-2xl font-bold text-white mb-2">Multi-Resolution Link Generator</h2>
                            <p class="text-slate-400">Generate button shortcodes for WordPress posts across resolutions.</p>
                        </div>
                        <button onclick="resetPostDl()" class="px-4 py-2 bg-slate-800 hover:bg-red-900/30 text-slate-400 hover:text-red-400 border border-slate-700 rounded-lg text-sm transition-colors">
                            <i class="fa-solid fa-rotate-left mr-2"></i> Reset All
                        </button>
                    </header>

                    <!-- Master Input -->
                    <div class="glass-panel p-6 rounded-xl mb-8">
                        <label class="block text-sm font-medium text-slate-400 mb-2">Movie / Post Title (Applies to all cards)</label>
                        <input id="post_master_title" type="text" class="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-lg text-white focus:ring-2 focus:ring-indigo-500 transition-all outline-none" placeholder="e.g. Spider-Man: No Way Home (2021)" oninput="updatePostDlOutputs()">
                    </div>

                    <!-- Cards Container -->
                    <div id="post_cards_container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Cards injected via JS -->
                    </div>
                </div>

                <!-- ==================== TAB 3: EPISODE GENERATOR ==================== -->
                <div id="tab-episode" class="tab-content space-y-6">
                    <header class="mb-8">
                        <h2 class="text-2xl font-bold text-white mb-2">Episode Link Generator</h2>
                        <p class="text-slate-400">Batch generate links for TV series episodes.</p>
                    </header>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 h-full">
                        <!-- Left: Configuration -->
                        <div class="space-y-6">
                            <div class="glass-panel rounded-xl p-6">
                                <h3 class="text-lg font-semibold text-indigo-400 mb-4 flex items-center gap-2"><i class="fa-solid fa-sliders"></i> Config</h3>
                                
                                <div class="mb-4">
                                    <label class="block text-sm font-medium text-slate-400 mb-2">Series Title</label>
                                    <input type="text" id="ep_title" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white focus:ring-indigo-500 outline-none" placeholder="e.g. Breaking Bad S01">
                                </div>

                                <div class="mb-2">
                                    <label class="block text-sm font-medium text-slate-400 mb-2">Source Type</label>
                                    <input type="text" id="ep_source_type" class="w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-white focus:ring-indigo-500 outline-none mb-3" placeholder="Source Name...">
                                    <div class="flex flex-wrap gap-2">
                                        <button onclick="setEpSource('G-Workers')" class="px-3 py-1 text-xs bg-slate-700 hover:bg-indigo-600 text-slate-300 hover:text-white rounded-full transition">G-Workers</button>
                                        <button onclick="setEpSource('G-Drive')" class="px-3 py-1 text-xs bg-slate-700 hover:bg-indigo-600 text-slate-300 hover:text-white rounded-full transition">G-Drive</button>
                                        <button onclick="setEpSource('HubCloud')" class="px-3 py-1 text-xs bg-slate-700 hover:bg-indigo-600 text-slate-300 hover:text-white rounded-full transition">HubCloud</button>
                                        <button onclick="setEpSource('Drop')" class="px-3 py-1 text-xs bg-slate-700 hover:bg-indigo-600 text-slate-300 hover:text-white rounded-full transition">Drop</button>
                                    </div>
                                </div>
                            </div>

                            <div class="glass-panel rounded-xl p-6">
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-lg font-semibold text-indigo-400 flex items-center gap-2"><i class="fa-solid fa-list-ol"></i> Episodes</h3>
                                    <div class="flex gap-2">
                                        <button onclick="addEpisodeField()" class="p-2 bg-slate-700 hover:bg-slate-600 text-green-400 rounded-lg"><i class="fa-solid fa-plus"></i></button>
                                        <button onclick="removeEpisodeField()" class="p-2 bg-slate-700 hover:bg-slate-600 text-red-400 rounded-lg"><i class="fa-solid fa-minus"></i></button>
                                    </div>
                                </div>
                                <div id="ep_inputs_container" class="space-y-3 max-h-[300px] overflow-y-auto pr-2">
                                    <div class="flex gap-0 group">
                                        <span class="inline-flex items-center px-4 rounded-l-lg border border-r-0 border-slate-600 bg-slate-700 text-slate-300 text-sm w-28 justify-center">Episode 01</span>
                                        <input type="text" class="ep-input w-full bg-slate-800 border border-slate-600 rounded-r-lg px-4 py-2 text-white focus:ring-indigo-500 outline-none transition-colors" placeholder="https://...">
                                    </div>
                                </div>
                                <div class="mt-6 flex gap-4">
                                    <button onclick="generateEpisodeCode()" class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg shadow-lg shadow-indigo-500/20">Generate Code</button>
                                    <button onclick="resetEpisodeDl()" class="px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-300 rounded-lg">Reset</button>
                                </div>
                            </div>
                        </div>

                        <!-- Right: Output -->
                        <div class="glass-panel rounded-xl p-6 flex flex-col h-full">
                            <h3 class="text-lg font-semibold text-green-400 mb-4 flex items-center gap-2"><i class="fa-solid fa-code"></i> Output</h3>
                            
                            <div class="mb-4">
                                <label class="text-xs font-bold text-slate-500 uppercase">Formatted Title</label>
                                <div class="relative">
                                    <input type="text" id="out_ep_title" readonly class="w-full bg-slate-900 border border-slate-700 rounded-lg px-4 py-2 text-slate-300 font-mono text-sm outline-none">
                                    <button onclick="copyToClipboard('out_ep_title')" class="absolute right-2 top-1.5 text-slate-500 hover:text-white"><i class="fa-regular fa-copy"></i></button>
                                </div>
                            </div>
                            
                            <div class="flex-grow flex flex-col">
                                <label class="text-xs font-bold text-slate-500 uppercase">Code</label>
                                <div class="relative flex-grow">
                                    <textarea id="out_ep_content" readonly class="w-full h-full min-h-[300px] bg-slate-900 border border-slate-700 rounded-lg px-4 py-3 text-slate-300 font-mono text-sm resize-none outline-none"></textarea>
                                    <button onclick="copyToClipboard('out_ep_content')" class="absolute right-3 top-3 p-2 bg-slate-800 border border-slate-600 rounded hover:bg-slate-700 text-slate-400 hover:text-white transition-colors"><i class="fa-regular fa-copy"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    <!-- TOAST NOTIFICATION -->
    <div id="global-toast" class="fixed bottom-6 right-6 transform translate-y-20 opacity-0 transition-all duration-300 z-50">
        <div class="bg-indigo-600 text-white px-6 py-3 rounded-lg shadow-xl flex items-center gap-3 border border-indigo-500">
            <i class="fa-solid fa-circle-check"></i>
            <span id="toast-msg" class="font-medium">Notification</span>
        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // ================= GLOBAL UTILS =================
        function switchTab(tabId) {
            // Hide all contents
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            // Deactivate all navs
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active', 'bg-indigo-600', 'text-white', 'shadow-lg');
                el.classList.add('text-slate-400');
            });

            // Show selected
            document.getElementById(`tab-${tabId}`).classList.add('active');
            // Activate Nav
            const navBtn = document.getElementById(`nav-${tabId}`);
            navBtn.classList.add('active');
            navBtn.classList.remove('text-slate-400');
        }

        function showToast(message, type = 'success') {
            const toast = document.getElementById('global-toast');
            const msgEl = document.getElementById('toast-msg');
            const iconEl = toast.querySelector('i');
            const wrapper = toast.firstElementChild;

            msgEl.textContent = message;

            if (type === 'error') {
                wrapper.classList.remove('bg-indigo-600', 'border-indigo-500');
                wrapper.classList.add('bg-red-600', 'border-red-500');
                iconEl.className = 'fa-solid fa-circle-exclamation';
            } else {
                wrapper.classList.remove('bg-red-600', 'border-red-500');
                wrapper.classList.add('bg-indigo-600', 'border-indigo-500');
                iconEl.className = 'fa-solid fa-circle-check';
            }

            toast.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        function copyToClipboard(elementId) {
            const el = document.getElementById(elementId);
            if (!el || !el.value) return;
            
            el.select();
            el.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(el.value).then(() => showToast('Copied to clipboard!'))
                .catch(() => {
                    document.execCommand('copy'); // Fallback
                    showToast('Copied to clipboard!');
                });
        }

        // ================= TOOL 1: IMDB GENERATOR =================
        const IMDB_API_KEY = "c0d64821";

        document.getElementById('btn_imdb_fetch').addEventListener('click', generateImdbPost);

        function addImdbScreenshot() {
            const container = document.getElementById('imdb_screenshots');
            const div = document.createElement('div');
            div.className = 'flex gap-2';
            div.innerHTML = `
                <input type="text" class="screenshot-input w-full bg-slate-800 border border-slate-700 rounded-lg px-4 py-2 text-sm text-white placeholder-slate-600 outline-none" placeholder="Image URL...">
                <button onclick="this.parentElement.remove()" class="text-red-400 hover:text-red-300 px-2"><i class="fa-solid fa-trash"></i></button>
            `;
            container.appendChild(div);
        }

        async function generateImdbPost() {
            const input = document.getElementById('imdb_id').value.trim();
            const btn = document.getElementById('btn_imdb_fetch');
            
            // Extract ID if full URL
            const imdbId = (input.match(/tt\d+/) || [input])[0];

            if (!imdbId) return showToast('Invalid IMDB ID', 'error');

            // Loading State
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';
            btn.disabled = true;

            try {
                const res = await fetch(`https://www.omdbapi.com/?apikey=${IMDB_API_KEY}&plot=full&i=${imdbId}`);
                const data = await res.json();

                if (data.Response === "False") throw new Error('Movie not found');

                populateImdbData(data);
                showToast('Fetched successfully!');
            } catch (err) {
                showToast(err.message || 'API Error', 'error');
            } finally {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        }

        function populateImdbData(data) {
            const lang = document.getElementById('imdb_lang').value;
            const source = document.getElementById('imdb_source').value;
            const subtitle = document.getElementById('imdb_subtitle').value;
            const qualityStr = document.getElementById('imdb_quality').value;
            const screenshots = Array.from(document.querySelectorAll('.screenshot-input')).map(i => i.value.trim()).filter(v => v);

            // Parse Quality
            const variants = qualityStr.split('||').map(p => {
                const match = p.trim().match(/^(\d{3,4}p|4k|HD)/i);
                return match ? match[0] : null;
            }).filter(Boolean);

            // Build Quality Links HTML
            let qualLinks = variants.map(v => `<a href="/category/${v.toLowerCase()}/">${v}</a>`).join(variants.length > 2 ? ", " : " &amp; ");
            if(!qualLinks) qualLinks = `<a href="/category/1080p/">1080p</a>, <a href="/category/720p/">720p</a> &amp; <a href="/category/480p/">480p</a>`;

            const subPart = subtitle ? ` ${subtitle}` : '';
            const title = `${data.Title} (${data.Year}) ${lang} Movie ${source}${subPart} - ${qualityStr}`;

            let html = `<p><b>Download ${data.Title} (${data.Year}) Full Movie</b>. This is a <strong>${lang}</strong> movie and is available in ${qualLinks} Qualities For Your Mobile/tablet/Computer. This movie is based on <strong>${data.Genre}</strong>.</p><br><strong><a href="https://dudefilms.in">DudeFilms</a> </strong>Provide You Super Quality Of Movies and WEB Series. We Provide Google Drive Direct Download Links For Fast And Secure Download. You Can Join us on Telegram For Latest Updates.<br> [imdb style="dark"]${data.imdbID}[/imdb]<br><h3 style="text-align: center;">Download ${data.Title} (${data.Year}) ${lang} Full Movie ~ DudeFilms</h3><p align="center"><b>IMDB Rating</b>: ${data.imdbRating}<br><strong>Directed:</strong> ${data.Director}<br><strong>Released Date:</strong> ${data.Released}<br><strong>Genre:</strong> ${data.Genre}<br><strong>Film Stars:</strong> ${data.Actors}<br><strong>Plot:</strong> ${data.Plot}</p><hr /><img class="aligncenter" src="https://i.imgur.com/ZuRn1nF.png" /><br>`;

            if (screenshots.length > 0) {
                screenshots.forEach(s => html += `<img class="aligncenter" src="${s}" /><br>`);
                html += `<hr />`;
            }
            html += `<img class="aligncenter" src="https://i.imgur.com/4VtZS20.png" />`;

            document.getElementById('out_imdb_title').value = title;
            document.getElementById('out_imdb_poster').value = data.Poster;
            document.getElementById('out_imdb_content').value = html;
        }

        // ================= TOOL 2: POST LINK GENERATOR =================
        const RESOLUTIONS = ['480p', '720p', '1080p'];
        const LINK_CONFIG = [
            { key: 'gworkers', label: 'G-Workers', icon: 'server', btnId: '1', btnTxt: 'G-Workers' },
            { key: 'gdrive', label: 'G-Drive (Login)', icon: 'cloud', btnId: '2', btnTxt: '' },
            { key: 'hubcloud', label: 'HubCloud', icon: 'cloud', btnId: '3', btnTxt: 'HubCloud(Fast-Server)' },
            { key: 'dood', label: 'DoodStream', icon: 'video', btnId: '4', btnTxt: '' },
            { key: 'filebee', label: 'FileBee', icon: 'file-archive', btnId: '3', btnTxt: 'FileBee(Fast-Server)' },
            { key: 'ocd', label: 'One Click', icon: 'download', btnId: '7', btnTxt: '' },
            { key: 'drop', label: 'Drop.Download', icon: 'download', btnId: '3', btnTxt: 'Drop.Download' },
            { key: 'other', label: 'Other', icon: 'link', btnId: '5', btnTxt: 'Other Download Links' },
        ];

        function initPostDl() {
            const container = document.getElementById('post_cards_container');
            container.innerHTML = '';

            RESOLUTIONS.forEach(res => {
                const inputsHtml = LINK_CONFIG.map(field => `
                    <div class="group mb-3">
                        <div class="flex items-center gap-2 mb-1">
                            <i data-lucide="${field.icon}" class="w-3 h-3 text-slate-500"></i>
                            <input type="text" 
                                class="post-label bg-transparent border-none p-0 text-xs text-slate-400 focus:text-indigo-400 w-full hover:text-white"
                                value="${field.btnTxt || field.label}"
                                data-key="${field.key}"
                                oninput="syncPostLabels(this)"
                            >
                        </div>
                        <input type="text" 
                            class="post-url w-full bg-slate-900 border border-slate-700 rounded px-3 py-1.5 text-xs text-white focus:border-indigo-500 outline-none"
                            placeholder="Paste ${field.label} URL"
                            data-res="${res}"
                            data-key="${field.key}"
                            oninput="updatePostDlOutputs()"
                        >
                    </div>
                `).join('');

                const card = `
                    <div class="bg-slate-800 border border-slate-700 rounded-xl overflow-hidden flex flex-col">
                        <div class="bg-slate-900/50 p-4 border-b border-slate-700 flex justify-between items-center">
                            <h3 class="font-bold text-indigo-400">${res} Links</h3>
                            <span id="count-${res}" class="text-xs bg-slate-800 px-2 py-1 rounded text-slate-500">0 Links</span>
                        </div>
                        <div class="p-4 flex-grow overflow-y-auto max-h-[300px]">${inputsHtml}</div>
                        <div class="bg-slate-900 p-4 border-t border-slate-700 space-y-3">
                            <div>
                                <div class="flex justify-between mb-1"><span class="text-[10px] uppercase text-slate-500 font-bold">Title</span><button onclick="copyToClipboard('post_title_${res}')" class="text-xs text-slate-500 hover:text-white"><i class="fa-regular fa-copy"></i></button></div>
                                <div id="post_title_${res}" class="bg-slate-800 p-2 rounded text-xs text-slate-300 font-mono border border-slate-700 h-8 overflow-hidden whitespace-nowrap"></div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-1"><span class="text-[10px] uppercase text-slate-500 font-bold">Code</span><button onclick="copyToClipboard('post_code_${res}')" class="text-xs text-slate-500 hover:text-white"><i class="fa-regular fa-copy"></i></button></div>
                                <textarea id="post_code_${res}" readonly class="w-full bg-slate-800 border border-slate-700 rounded p-2 text-[10px] font-mono text-blue-300 h-20 resize-none outline-none"></textarea>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += card;
            });
            lucide.createIcons();
        }

        function syncPostLabels(source) {
            const key = source.dataset.key;
            document.querySelectorAll(`.post-label[data-key="${key}"]`).forEach(el => {
                if(el !== source) el.value = source.value;
            });
            updatePostDlOutputs();
        }

        function updatePostDlOutputs() {
            const masterTitle = document.getElementById('post_master_title').value;

            RESOLUTIONS.forEach(res => {
                // Title
                const titleEl = document.getElementById(`post_title_${res}`);
                titleEl.textContent = masterTitle ? `${masterTitle} ${res}` : '...';

                // Content
                let code = "";
                let count = 0;

                LINK_CONFIG.forEach(field => {
                    const urlInput = document.querySelector(`.post-url[data-res="${res}"][data-key="${field.key}"]`);
                    const lblInput = document.querySelector(`.post-label[data-key="${field.key}"]`);
                    
                    let url = urlInput.value.trim();
                    const lbl = lblInput.value.trim();

                    if(url) {
                        count++;
                        if(field.key === 'filebee') url = url.replace("filepress.sbs", "gdpress.lol");
                        code += `<p style="text-align: center;">[maxbutton id="${field.btnId}" url="${url}"${lbl ? ` text="${lbl}"` : ''} ]</p>\n`;
                    }
                });

                document.getElementById(`post_code_${res}`).value = code;
                document.getElementById(`count-${res}`).textContent = `${count} Links`;
            });
        }

        function resetPostDl() {
            if(!confirm("Clear all fields?")) return;
            document.getElementById('post_master_title').value = '';
            document.querySelectorAll('.post-url').forEach(e => e.value = '');
            updatePostDlOutputs();
        }

        // ================= TOOL 3: EPISODE GENERATOR =================
        let episodeCount = 1;

        function addEpisodeField() {
            episodeCount++;
            const container = document.getElementById('ep_inputs_container');
            const num = episodeCount.toString().padStart(2, '0');
            const div = document.createElement('div');
            div.className = 'flex gap-0 group';
            div.innerHTML = `
                <span class="inline-flex items-center px-4 rounded-l-lg border border-r-0 border-slate-600 bg-slate-700 text-slate-300 text-sm w-28 justify-center">Episode ${num}</span>
                <input type="text" class="ep-input w-full bg-slate-800 border border-slate-600 rounded-r-lg px-4 py-2 text-white focus:ring-indigo-500 outline-none transition-colors" placeholder="https://...">
            `;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        function removeEpisodeField() {
            const container = document.getElementById('ep_inputs_container');
            if(episodeCount > 1) {
                container.removeChild(container.lastElementChild);
                episodeCount--;
            }
        }

        function setEpSource(val) {
            document.getElementById('ep_source_type').value = val;
        }

        function generateEpisodeCode() {
            const title = document.getElementById('ep_title').value.trim();
            const source = document.getElementById('ep_source_type').value.trim();
            const inputs = document.querySelectorAll('.ep-input');
            
            if (!title || !source) return showToast('Title and Source required', 'error');

            let code = "";
            let hasLinks = false;

            inputs.forEach((input, idx) => {
                const link = input.value.trim();
                const epNum = (idx + 1).toString().padStart(2, '0');
                if(link) {
                    hasLinks = true;
                    code += `<p style="text-align: center;">[maxbutton id="6" url="${link}" text="Episode ${epNum}" ]</p>\n`;
                }
            });

            if(!hasLinks) return showToast('Add at least one link', 'error');

            document.getElementById('out_ep_title').value = `${title} {${source}}`;
            document.getElementById('out_ep_content').value = code;
            showToast('Episodes Generated!');
        }

        function resetEpisodeDl() {
            document.getElementById('ep_title').value = '';
            document.getElementById('ep_source_type').value = '';
            document.getElementById('out_ep_title').value = '';
            document.getElementById('out_ep_content').value = '';
            
            const container = document.getElementById('ep_inputs_container');
            container.innerHTML = `
                <div class="flex gap-0 group">
                    <span class="inline-flex items-center px-4 rounded-l-lg border border-r-0 border-slate-600 bg-slate-700 text-slate-300 text-sm w-28 justify-center">Episode 01</span>
                    <input type="text" class="ep-input w-full bg-slate-800 border border-slate-600 rounded-r-lg px-4 py-2 text-white focus:ring-indigo-500 outline-none transition-colors" placeholder="https://...">
                </div>
            `;
            episodeCount = 1;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            initPostDl();
            lucide.createIcons();
        });

    </script>
</body>
</html>
